# 4. Testing Library

- Jest
- Describe-Context-It íŒ¨í„´
- React Testing Library

## Jest

ğŸš€ [**Jest ê³µì‹ë¬¸ì„œ**](https://jestjs.io/)

ê±°ì˜ ëª¨ë“  ê²ƒì„ ê°–ì¶˜ í…ŒìŠ¤íŒ… ë„êµ¬.

Mochaì™€ Chaiì²˜ëŸ¼ RSpecì˜ describe-itì„ ì§€ì›í•˜ê³ , expectë¡œ ë‹¨ì–¸(assertion)í•  ìˆ˜ ìˆë‹¤. Mockingë„ ë‹¤ì–‘í•œ ë ˆë²¨ì—ì„œ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

### [Mockingê´€ë ¨](https://www.youtube.com/watch?v=RoQtNLl-Wko)

ì•„ìƒ¬ë‹˜ì€ Mockì„ êµ‰ì¥íˆ ë§ì´ ì”€.  
ì´ê²ƒì€ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•  ë•Œ ëª¨í‚¹ì„ í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹˜.  
ì´ëŠ” ê°œë°œì„ ë¹¨ë¦¬ í•˜ê¸° ìœ„í•´ ëª¨í‚¹ì„ ë§ì´ í•œë‹¨ ê²ƒ.

1. ëª¨í‚¹ì„ ë„ˆë¬´ ë§ì´ í•´ì„œ ì–´ë µë‹¤ëŠ” ê²ƒì€ ì„¤ê³„ê°€ ì˜ëª»ëì„ ê°€ëŠ¥ì„±ì´ í¼.
2. ì•„ë‹ˆë©´ ì§€ê¸ˆ ì‘ì„±í•˜ëŠ” í…ŒìŠ¤íŠ¸ì½”ë“œê°€ í•µì‹¬ ë¡œì§ì´ ì•„ë‹˜(UIë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆì´ì–´).  
   ì´ëŠ” ë„ë©”ì¸ ê°ì²´ë“¤í•œí…Œ ë¹„ì¦ˆë‹ˆìŠ¤ë¡œì§ì´ë‚˜ ì¤‘ìš”í•œ ì²˜ë¦¬ë“¤ì„ ë„˜ê¸°ê³  ìˆì§€ ì•Šë‹¨ ê²ƒ.

### [í”„ë¡ íŠ¸ì—”ë“œì—ì„œì˜ tdd](https://www.youtube.com/watch?v=-kUmsKRmOnA)

ê°„ë‹¨í•œ í•´ë²•
ë³µì¡í•˜ê±°ë‚˜ ìì£¼ ë°”ë€”ë§Œí•œ ë¶€ë¶„ì€ í…ŒìŠ¤íŠ¸í•˜ì§€ ì•ŠìŒ.

```example
íŠ¹ì • ìœ„ì¹˜ì˜ í…ìŠ¤íŠ¸ê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤ // Bad
í™”ë©´ ì•ˆì˜ í…ìŠ¤íŠ¸ ì¤‘ì— ì œëª©ì´ ìˆëŠëƒ // Good

nextë²„íŠ¼ì´ í´ë¦­ë¼ì„œ í˜ì´ì§€ê°€ ë„˜ì–´ê°„ë‹¤ // Bad _ë²„íŠ¼ì´ ë³€ê²½ë  ìˆ˜ ìˆìŒ
í˜ì´ì§€ ë„˜ì–´ê°€ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤. // Good _í—¬í¼ë©”ì„œë“œë¥¼ í˜¸ì¶œ
```

1. UIê°€ ì•„ë‹Œ ì—°ê²°ëœ ì»¨íŠ¸ë¡¤ëŸ¬, ëª¨ë¸ë“¤, ì„œë¹„ìŠ¤ë“¤ì„ ë¶„ë¦¬í•´ì„œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ìª½ìœ¼ë¡œ ë°©í–¥ì„ ì¡ìœ¼ë©´ í›¨ì”¬ ì‰¬ì›€.
2. ì„œë¹„ìŠ¤ì— ë¬¼ë¦¬ëŠ” httpê°™ì€ ê²ƒì„ DIë¥¼ í•´ì£¼ë©´ ëª©í‚¹í•˜ê¸° êµ‰ì¥íˆ ì‰¬ì›€.
3. í…ŒìŠ¤íŠ¸ëŠ” ë¡œì§ì— ê´€í•œ ê±¸ë¡œ, í™”ë©´ì— ë³´ì—¬ì£¼ëŠ”ê²Œ ì¤‘ìš”í•œê²Œ ì•„ë‹ˆë¼,
   ì¥ë°”êµ¬ë‹ˆì˜ ìˆ˜ëŸ‰ì„ ë³€ê²½í•˜ëŠ”, ë™ì¼ ìƒí’ˆì˜ ê²½ìš°ì—” ìˆ˜ëŸ‰ì„ ëŠ˜ë ¤ì£¼ëŠ” ê²ƒ ê³¼ ê°™ì€ ê²ƒì„ í…ŒìŠ¤íŠ¸
4. ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬, ì±…ì„ì˜ ë¶„ë¦¬, ì¢‹ì€ í”„ë¡œê·¸ë¨ êµ¬ì¡°

### [rspec ì˜ì“°ê³  ê³„ì‹ ê°€ìš”?](https://marocchino.net/2016/12/04/about-rspec/)

- BDDëŠ” ì„œë¸Œì íŠ¸ì— ëŒ€í•´ ì¡°ê±´ì„ ì£¼ê³  ê·¸ ê²°ê³¼ë¥¼ í™•ì¸í•˜ëŠ” 3ë‹¨ê³„ë¡œ ë‚˜ëˆ„ì–´ ì‘ì„±í•˜ëŠ”ê²Œ íŠ¹ì§•
- describe - (context - before) - it
  - describe: ì‚¬ì–‘ì„œì˜ Given, í…ŒìŠ¤íŠ¸í•  ëŒ€ìƒ ì§€ì •
  - context: ì‚¬ì–‘ì„œì˜ ë§Œì¼(When), ì¡°ê±´ì„ ì •ì˜í•  ë•Œ ì‚¬ìš©
  - it: it í•˜ë‚˜ì— expectí•˜ë‚˜ ì´ìƒ ì‚¬ìš©í•˜ëŠ”ê²ƒì€ ì¢‹ì§€ì•Šì€ ì§•í›„

### [Given-When-Then](https://megaptera.notion.site/Given-When-Then-a5c37e9ad60b44f28cab5a2e5d784c98)

í…ŒìŠ¤íŠ¸ì½”ë“œë¥¼ ì‹œì‘í•  ë•Œ ê°€ì¥ ì¢‹ì€ ë°©ë²• ì¤‘ í•˜ë‚˜ëŠ” í…œí”Œë¦¿ ì‚¬ìš©. Given-When-Then

ì•½ê°„ë§Œ ì‹œê°„ì„ ë‚´ì„œ Given - When - Then í…œí”Œë¦¿ì— ë§ì¶°ì„œ ë‚´ê°€ í•˜ë ¤ëŠ” ê²Œ ë­”ì§€ ìƒê°í•´ë³´ê¸°

### [ì½”ë”©ì„ í•˜ê¸° ì „ì— í•´ì•¼ í•  ì¼](https://www.youtube.com/watch?v=N4FV788fNiQ)

ì½”ë”©í•˜ê¸° ì „ì— ì¶©ë¶„íˆ ìƒê°(ê³„íš)í•˜ê¸°

1. ì–´ë–¤ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ëŠ”ì§€ ìš”êµ¬ì‚¬í™©ì„ ëª…í™•í•˜ê²Œ í•˜ê¸°(ì—‰ëš±í•œ ê²ƒì„ ë§Œë“¤ ìˆ˜ ìˆìŒ)
2. ëª…ì„¸(ìš”êµ¬ì‚¬í•­)ë¥¼ ì¢€ ë” ëª…í™•íˆ(ì˜ˆì œë¥¼ ë§Œë“¤ë©´ì„œ ëª…í™•í•˜ê²Œ)

   2-1. ë²„ê·¸ë€ ëª…ì„¸ëŒ€ë¡œ ì‘ë™í•˜ì§€ì•ŠëŠ”, ëª…ì„¸ì— ì •ì˜ë˜ì§€ì•ŠëŠ” ê²ƒ.

   2-2. ì˜¬ë°”ë¥´ê²Œ ë™ì‘í•˜ëŠ” ê²ƒì€ ëª…ì„¸ëŒ€ë¡œ ë™ì‘í•˜ëŠ” ê²ƒ.

3. ì´ì „ê¹Œì§€ ëª…ì„¸ë¥¼ ëª…í™•íˆí–ˆë‹¤ë©´, ëª…ì„¸ë¥¼ ê°„ë‹¨íˆ
   ê·¸ë¦¬ê³  ì´ëŸ¬í•œ ëª…ì„¸ë“¤ì„ í…ŒìŠ¤íŠ¸ì½”ë“œë¡œ ì‘ì„±.
4. ì½”ë”©ì„ í•˜ë©´ì„œ ì´ê±´ ì´ë ‡ê²Œ ë°œì „, ì´ ì„¤ê³„ëŠ” í‹€ë ¤ë¨¹ì—ˆì–´ í•˜ë©´ì„œ ê°œì„ í•˜ê³  ì½”ë”©ì„ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ë°˜ë³µ.
   => ë¦¬íŒ©í† ë§

ë­ë¥¼ ë§Œë“¤ë ¤ëŠ”ì§€ ì•Œê³ , í•„ìš”í•œ ê²ƒë“¤ì„ ê²°ì •í•˜ê³ , ì´ë£¨ì–´ì§€ë„ë¡.

### [ë‚´ê°€ í•œ ì¼ ì¦ëª…í•˜ê¸°](https://www.youtube.com/watch?v=wd8OmjB_eUI)

ë‚´ê°€ ë§Œë“  ê²ƒì´ ì œëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ ì¦ëª…. ë‚´ê°€ í…ŒìŠ¤íŠ¸í•œ ì¼€ì´ìŠ¤ê¹Œì§€ ë³´ì—¬ì¤Œ.

í•  ìˆ˜ ìˆìœ¼ë©´ 100%ì˜ ì»¤ë²„ë¦¬ì§€ ì‘ì„±. 90í¼ê°€ ë˜ë©´, ì–´ë–¤ ê²ƒì„ ê¹¨ê²Œ ë˜ë©´ ì•Œì•„ì±„ì§€ ëª»í•¨.

### [JUnit5ë¡œ ê³„ì¸µ êµ¬ì¡°ì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸°](https://johngrib.github.io/wiki/junit5-nested/#describe---context---it-%ED%8C%A8%ED%84%B4)

Describe - (Context- before) - (It - expect) íŒ¨í„´

### [BETTER SPECS](https://www.betterspecs.org/)

â†’ RSpec ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ ëª¨ìŒ. ê·¸ëŒ€ë¡œ ì“¸ ìˆ˜ëŠ” ì—†ì§€ë§Œ, ì°¸ê³ í•˜ì.

```example
Describe: ì„¤ëª…í•  í…ŒìŠ¤íŠ¸ ëŒ€ìƒì„ ëª…ì‹œí•œë‹¤.
Context: í…ŒìŠ¤íŠ¸ ëŒ€ìƒì´ ë†“ì¸ ìƒí™©ì„ ì„¤ëª…í•œë‹¤.
It: í…ŒìŠ¤íŠ¸ ëŒ€ìƒì˜ í–‰ë™ì„ ì„¤ëª…í•œë‹¤.

Describe: í…ŒìŠ¤íŠ¸ ëŒ€ìƒì´ ë˜ëŠ” í´ë˜ìŠ¤, ë©”ì†Œë“œ ì´ë¦„ì„ ëª…ì‹œí•œë‹¤.
Context: í…ŒìŠ¤íŠ¸í•  ë©”ì†Œë“œì— ì…ë ¥í•  íŒŒë¼ë¯¸í„°ë¥¼ ì„¤ëª…í•œë‹¤.
It: í…ŒìŠ¤íŠ¸ ëŒ€ìƒ ë©”ì†Œë“œê°€ ë¬´ì—‡ì„ ë¦¬í„´í•˜ëŠ”ì§€ ì„¤ëª…í•œë‹¤.

// í•œêµ­ì–´ë¡œ í‘œí˜„í•˜ê¸°
DescribeëŠ” í…ŒìŠ¤íŠ¸ ëŒ€ìƒì„ ëª…ì‚¬ë¡œ ì‘ì„±í•œë‹¤.
ContextëŠ” ~ì¸ ê²½ìš°, ~í•  ë•Œ, ë§Œì•½ ~ í•˜ë‹¤ë©´ ê³¼ ê°™ì´ ìƒí™© ë˜ëŠ” ì¡°ê±´ì„ ê¸°ìˆ í•œë‹¤.
Itì€ ìœ„ì—ì„œ ëª…ì‚¬ë¡œ ì‘ì„±í•œ í…ŒìŠ¤íŠ¸ ëŒ€ìƒì˜ í–‰ë™ì„ ì‘ì„±í•œë‹¤.
í…ŒìŠ¤íŠ¸ ëŒ€ìƒì˜ í–‰ë™ì€ ~ì´ë‹¤, ~í•œë‹¤, ~ë¥¼ ê°–ëŠ”ë‹¤ê°€ ì ì ˆí•œë‹¤.
~ëœë‹¤ ê°™ì€ ìˆ˜ë™í˜• í‘œí˜„ì€ ì¢‹ì§€ ì•Šë‹¤.
```

ì¥ì 

- í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ê³„ì¸µ êµ¬ì¡°ë¡œ ë§Œë“¤ì–´ ì¤€ë‹¤.
- í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ì½ì„ ë•Œ ìŠ¤ì½”í”„ ë²”ìœ„ë§Œ ì‹ ê²½ì“°ë©´ ëœë‹¤.
- "ë¹ ëœ¨ë¦°" í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì°¾ê¸° ì‰½ë‹¤.
- ë†’ì€ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ê°€ í•„ìš”í•œ ê²½ìš° í° ë„ì›€ì´ ëœë‹¤.
- ì¬ë¯¸ìˆë‹¤. ì¤‘ë…ì„±ì´ ìˆë‹¤

### ì´ì–´ì„œ ì½ì—ˆì„ ë•Œ ë¹„ë¬¸ì´ ì•„ë‹Œ í•˜ë‚˜ì˜ ì¢‹ì€ ë¬¸ì¥ì´ ë˜ë„ë¡ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì¤‘ìš”

í•˜ë‚˜ì˜ ì™„ì „í•œ ë¬¸ì¥ì´ ë˜ëŠ”ì§€ ì²´í¬í•˜ë©° ì‘ì„±í•˜ëŠ” ìŠµê´€ì„ ê¸°ë¥¼ í•„ìš”ê°€ ìˆë‹¤.

```example
Bad _ "toString ë©”ì†Œë“œëŠ”â€¦ ë¬¸ìì—´ì´ ëœë‹¤" ì´ë¯€ë¡œ ë¹„ë¬¸ì´ë‹¤. ì¦‰ ì˜¬ë°”ë¥¸ ë¬¸ì¥ì´ ì•„ë‹ˆë‹¤.
"ComplexNumber í´ë˜ìŠ¤ì˜ toString ë©”ì†Œë“œëŠ” ë§Œì•½ ì‹¤ìˆ˜ê°’ë§Œ ì½ê³  í—ˆìˆ˜ê°’ì´ ì—†ë‹¤ë©´, ì‹¤ìˆ˜ë¶€ë§Œ í‘œí˜„í•œ ë¬¸ìì—´ì´ ëœë‹¤"
Good
"ComplexNumber í´ë˜ìŠ¤ì˜ toString ë©”ì†Œë“œëŠ” ë§Œì•½ ì‹¤ìˆ˜ê°’ë§Œ ìˆê³  í—ˆìˆ˜ê°’ì´ ì—†ë‹¤ë©´, ì‹¤ìˆ˜ë¶€ë§Œ í‘œí˜„í•œ ë¬¸ìì—´ì„ ë¦¬í„´í•œë‹¤"

```

[ì´ìƒí•œëª¨ì„](https://www.youtube.com/watch?v=tLG0X-4xB64)
[TDD on Spring](https://www.youtube.com/watch?v=-hqiLswBiY8)

```js
function add(x: number, y: number): number {
  return x + y;
}

describe("add function", () => {
  it("returns som of two numbers", () => {
    expect(add(1, 2)).toBe(3);
  });
});

test("Greeting", () => {
  render(<Greeting name="world" />);

  screen.getByText("Hello, world!");

  screen.getByText(/Hello/);

  expect(screen.queryByText(/Hi/)).not.toBeInTheDocument();
});
```

## ê°•ì˜ë‚´ìš©

Jest

Mochaì™€ Chaiì²˜ëŸ¼ RSpecì˜ describe-itì„ ì§€ì›í•˜ê³ , expectë¡œ ë‹¨ì–¸(assertion)í•  ìˆ˜ ìˆê³ , Mockingë„ ë‹¤ì–‘í•œ ë ˆë²¨ì—ì„œ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

describeì—ëŠ” ì£¼ì–´ ì“°ê³ 
itì—ëŠ” í–‰ë™ì„ ë¬˜ì‚¬
contextëŠ” ì‹œì¸„ì—ì´ì…˜ì„ ë¬˜ì‚¬ (ifì²˜ëŸ¼ ì‚¬ìš©í•˜ëŠ”ë“¯)

ì €ëŸ°ì‹ìœ¼ë¡œ BDDìŠ¤íƒ€ì¼ë¡œ ì¡ì•„ì£¼ë©´ í‘œí˜„ë ¥ì´ ì¢‹ì•„ì§€ê³ ,
ê³ ë¯¼í•  ìˆ˜ ìˆê²Œí•´ì¤Œ. => í‘œí˜„ë ¥ì´ ì¢‹ì•„ì§€ë‹ˆê¹Œ ì´ëŸ¬ë©´ ì–´ë–»ê²Œ ë ê¹Œ ì´ëŸ¬ë©´ ì–´ë–»ê²Œ ë ê¹Œ

getByTextì— ë¬¸ìì—´ì„ ì£¼ë©´ ì •í™•í•˜ê²Œ ì¼ì¹˜í•´ì•¼í•¨(ì´ê±¸ë¡œ ì—˜ë¦¬ë©‘íŠ¸ë¥¼ ì°¾ìœ¼ë ¤í•˜ê¸°ë•Œë¬¸ì—)
ì¼ë¶€ë§Œ ê°€ê³  í•˜ê³ ì‹¶ìœ¼ë©´ ì •ê·œí‘œí˜„ì‹ìœ¼ë¡œ ì“°ë©´ë¨

npx jest --verbose
npm run watch:test -- --verbose

toBeFalsyë³´ë‹¤ ë” ì¢‹ì€ê²Œ not.toBeInTheDocument

React Testing Library UI testingì— íŠ¹í™”ë¨ + jestdom -> matcher
